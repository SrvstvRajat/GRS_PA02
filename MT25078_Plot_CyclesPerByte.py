import matplotlib.pyplot as plt

msg_sizes = [32, 128, 512, 2048]

A1 = {
    1: [1468302618.53, 416238650.62, 110289241.71, 44132957.80],
    2: [1594144715.69, 418073127.80, 110632351.29, 45200119.74],
    4: [2031523818.09, 574917684.80, 110157464.17, 44159637.35],
    8: [1593396527.06, 420774570.31, 109892510.42, 43975838.96],
}

A2 = {
    1: [1507162962.25, 403412004.89, 109924619.14, 43891122.10],
    2: [1439201123.14, 402581017.55, 109994610.22, 43627733.89],
    4: [1469515225.47, 397865702.44, 101931211.28, 37342745.39],
    8: [1480041921.88, 398112904.91, 102211223.88, 37192933.12],
}

A3 = {
    1: [1449398721.53, 399882234.87, 163520510.65, 44212311.98],
    2: [1427712344.88, 402921102.14, 164417381.20, 44110987.12],
    4: [1593284242.78, 563335531.23, 163516409.65, 44217845.33],
    8: [1579138201.44, 560994812.11, 162983412.32, 44199832.91],
}

for t in [1, 2, 4, 8]:
    plt.figure(figsize=(7,5))
    plt.plot(msg_sizes, A1[t], marker='o', label="A1 Two-copy")
    plt.plot(msg_sizes, A2[t], marker='o', label="A2 One-copy")
    plt.plot(msg_sizes, A3[t], marker='o', label="A3 Zero-copy")

    plt.xlabel("Message Size (bytes)")
    plt.ylabel("CPU Cycles per Byte")
    plt.title(f"CPU Cycles per Byte vs Message Size (Threads = {t})")
    plt.legend()
    plt.grid(True)

    plt.savefig(f"MT25078_CyclesPerByte_T{t}.png", dpi=300, bbox_inches="tight")
    plt.show()
